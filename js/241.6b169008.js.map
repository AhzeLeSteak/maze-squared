{"version":3,"file":"js/241.6b169008.js","mappings":"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","sources":["webpack://maze-squared/./node_modules/core-js/internals/array-buffer-basic-detection.js","webpack://maze-squared/./node_modules/core-js/internals/array-buffer-view-core.js","webpack://maze-squared/./node_modules/core-js/internals/array-iteration-from-last.js","webpack://maze-squared/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://maze-squared/./node_modules/core-js/internals/function-bind-context.js","webpack://maze-squared/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://maze-squared/./node_modules/core-js/modules/es.typed-array.at.js","webpack://maze-squared/./node_modules/core-js/modules/es.typed-array.find-last-index.js","webpack://maze-squared/./node_modules/core-js/modules/es.typed-array.find-last.js","webpack://maze-squared/./src/views/Play.vue?85ab","webpack://maze-squared/./src/Rendering/Abstract/CanvalWebGL.ts","webpack://maze-squared/./src/Rendering/CanvasRaycast.ts","webpack://maze-squared/./src/views/Play.vue?6001","webpack://maze-squared/./src/views/Play.vue"],"sourcesContent":["// eslint-disable-next-line es-x/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineProperty = require('../internals/object-define-property').f;\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = global.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = global.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = global[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {\n    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n  } });\n  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {\n    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ findLast, findLastIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_FIND_LAST_INDEX = TYPE == 1;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var index = lengthOfArrayLike(self);\n    var value, result;\n    while (index-- > 0) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (result) switch (TYPE) {\n        case 0: return value; // findLast\n        case 1: return index; // findLastIndex\n      }\n    }\n    return IS_FIND_LAST_INDEX ? -1 : undefined;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.findLast` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLast: createMethod(0),\n  // `Array.prototype.findLastIndex` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLastIndex: createMethod(1)\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es-x/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es-x/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\nexportTypedArrayMethod('at', function at(index) {\n  var O = aTypedArray(this);\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n  return (k < 0 || k >= len) ? undefined : O[k];\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLastIndex = require('../internals/array-iteration-from-last').findLastIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLastIndex` method\n// https://github.com/tc39/proposal-array-find-from-last\nexportTypedArrayMethod('findLastIndex', function findLastIndex(predicate /* , thisArg */) {\n  return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLast = require('../internals/array-iteration-from-last').findLast;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLast` method\n// https://github.com/tc39/proposal-array-find-from-last\nexportTypedArrayMethod('findLast', function findLast(predicate /* , thisArg */) {\n  return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"canvas-container\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1))\n}","import { Vector2 } from \"../../Engine/Vector2\";\nimport { Canvas } from \"./Canvas\";\n\ntype Color = { r: number; g: number; b: number };\n\nexport abstract class CanvasWebGL extends Canvas {\n  protected gl: WebGL2RenderingContext;\n  private shaderProgram!: WebGLProgram;\n  private color: Color = { r: 0, g: 0, b: 0 };\n\n  private lines_vertex = [] as number[];\n  private triangle_vertex = [] as number[];\n\n  protected constructor(size: Vector2) {\n    super(size);\n    this.gl = this.canvas.getContext(\"webgl2\")!;\n    this.setupWebGl();\n    this.reset();\n  }\n\n  private setupWebGl() {\n    const gl = this.gl;\n    const vertexShaderSource = `#version 300 es\n\n    in vec2 a_Position;\n    in vec3 a_Color;\n    out vec3 v_Color;\n\n    void main()\n    {\n        gl_Position = vec4(a_Position, 0.0, 1.0);\n        v_Color = a_Color;\n    }`;\n\n    const fragmentShaderSource = `#version 300 es\n\n    precision mediump float;\n    in vec3 v_Color;\n    out vec4 fragColor;\n\n    void main()\n    {\n        fragColor = vec4(v_Color, 1.0);\n    }`;\n\n    const vShader = gl.createShader(gl.VERTEX_SHADER);\n    if (!vShader) throw new Error(\"Imposibble de créer le vertex shader\");\n    gl.shaderSource(vShader, vertexShaderSource);\n    gl.compileShader(vShader);\n\n    const fShader = gl.createShader(gl.FRAGMENT_SHADER);\n    if (!fShader) throw new Error(\"Imposibble de créer le fragment shader\");\n    gl.shaderSource(fShader, fragmentShaderSource);\n    gl.compileShader(fShader);\n\n    const program = gl.createProgram();\n    if (!program) throw new Error(\"Impossible de créer le program\");\n    this.shaderProgram = program;\n    gl.attachShader(program, vShader);\n    gl.attachShader(program, fShader);\n    gl.linkProgram(program);\n    gl.useProgram(program);\n  }\n\n  private deviceToNormalised(point: number, horizontal: boolean) {\n    return horizontal\n      ? (2 * point) / this.canvas.width - 1\n      : (-2 * point) / this.canvas.height + 1;\n  }\n\n  protected setColor(red: number, green: number, blue: number) {\n    this.color.r = red;\n    this.color.g = green;\n    this.color.b = blue;\n  }\n\n  protected drawHorizontalLine(x: number, y1: number, y2: number): void {\n    x = this.deviceToNormalised(x, true);\n    y1 = this.deviceToNormalised(y1, false);\n    y2 = this.deviceToNormalised(y2, false);\n    this.lines_vertex.push(\n      // First line\n      x,\n      y1, // Coordinate\n      this.color.r,\n      this.color.g,\n      this.color.b, // Color\n      // Second line\n      x,\n      y2, // Coordinate\n      this.color.r,\n      this.color.g,\n      this.color.b // Color\n    );\n  }\n\n  protected drawRectangle(\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ): void {\n    const xLeft = this.deviceToNormalised(x, true);\n    const xRight = this.deviceToNormalised(x + width, true);\n    const yUp = this.deviceToNormalised(y, false);\n    const yDown = this.deviceToNormalised(y + height, false);\n    this.triangle_vertex.push(\n      //triangle 1\n      //vertex 1\n      xLeft,\n      yUp,\n      this.color.r,\n      this.color.g,\n      this.color.b,\n      //vertex 2\n      xRight,\n      yUp,\n      this.color.r,\n      this.color.g,\n      this.color.b,\n      //vertex 3\n      xLeft,\n      yDown,\n      this.color.r,\n      this.color.g,\n      this.color.b,\n      //triangle 2\n      //vertex 1\n      xRight,\n      yUp,\n      this.color.r,\n      this.color.g,\n      this.color.b,\n      //vertex 2\n      xLeft,\n      yDown,\n      this.color.r,\n      this.color.g,\n      this.color.b,\n      //vertex 3\n      xRight,\n      yDown,\n      this.color.r,\n      this.color.g,\n      this.color.b\n    );\n  }\n\n  protected reset(): void {\n    this.gl.clearColor(1, 1, 1, 1);\n    this.lines_vertex = [];\n    this.triangle_vertex = [];\n  }\n\n  protected finishDrawing() {\n    this.finishLines();\n    this.finishRect();\n\n    //console.log(this.triangle_vertex.length)\n\n    //332486\n    //125238\n  }\n\n  private finishLines() {\n    if (this.lines_vertex.length === 0) return;\n    const gl = this.gl;\n    const verticesAndColors = new Float32Array(this.lines_vertex);\n\n    const vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n    gl.bufferData(gl.ARRAY_BUFFER, verticesAndColors, gl.STATIC_DRAW);\n\n    const FSIZE = verticesAndColors.BYTES_PER_ELEMENT;\n\n    const a_Position = gl.getAttribLocation(this.shaderProgram, \"a_Position\");\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 5 * FSIZE, 0);\n    gl.enableVertexAttribArray(a_Position);\n\n    const a_Color = gl.getAttribLocation(this.shaderProgram, \"a_Color\");\n    gl.vertexAttribPointer(a_Color, 3, gl.FLOAT, false, 5 * FSIZE, 2 * FSIZE);\n    gl.enableVertexAttribArray(a_Color);\n\n    gl.drawArrays(gl.LINES, 0, verticesAndColors.length / 5);\n  }\n\n  private finishRect() {\n    if (this.triangle_vertex.length === 0) return;\n    const gl = this.gl;\n    const verticesAndColors = new Float32Array(this.triangle_vertex);\n\n    const vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n    gl.bufferData(gl.ARRAY_BUFFER, verticesAndColors, gl.STATIC_DRAW);\n\n    const FSIZE = verticesAndColors.BYTES_PER_ELEMENT;\n\n    const a_Position = gl.getAttribLocation(this.shaderProgram, \"a_Position\");\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 5 * FSIZE, 0);\n    gl.enableVertexAttribArray(a_Position);\n\n    const a_Color = gl.getAttribLocation(this.shaderProgram, \"a_Color\");\n    gl.vertexAttribPointer(a_Color, 3, gl.FLOAT, false, 5 * FSIZE, 2 * FSIZE);\n    gl.enableVertexAttribArray(a_Color);\n\n    gl.drawArrays(gl.TRIANGLES, 0, verticesAndColors.length / 5);\n  }\n}\n","import { Game } from \"@/Engine/Game\";\r\nimport { degreToRadian } from \"@/Engine/utils\";\r\nimport { textures } from \"@/Engine/Texture/load_textures\";\r\nimport { Pixel } from \"@/Engine/Texture/Texture\";\r\nimport { CanvasWebGL } from \"./Abstract/CanvalWebGL\";\r\n\r\n\r\nconst SAMPLE_SIZE = 50;\r\nlet tick_index = 0;\r\nlet tick_sum = 0;\r\nconst tick_list = new Array(SAMPLE_SIZE).fill(0);\r\n\r\nexport class CanvasRaycast extends CanvasWebGL {\r\n  private shadow_ratio = 0.2;\r\n  private context2D: CanvasRenderingContext2D;\r\n\r\n  constructor(width: number, height?: number) {\r\n    super({ x: width, y: height || (width * 9) / 16 });\r\n    this.context2D = this.createCanvas().getContext(\"2d\")!;\r\n      this.resizeCanvasHtml(this.context2D.canvas, this.size);\r\n      this.context2D.font = \"16px Comic sans\";\r\n      this.context2D.fillStyle = \"yellow\";\r\n  }\r\n\r\n  drawContext(game: Game, dt: number): void {\r\n    //if (!environment.draw3d) return;\r\n    this.reset();\r\n\r\n    this.drawFps(dt);\r\n\r\n    const floor_texture = textures.get(\"floor\")!;\r\n    const floor_tile_size = floor_texture.columns.length;\r\n\r\n    const map = game.map;\r\n    const player_pos = game.player.pos;\r\n\r\n    const col_size = 4; //numbers of columns grouped for rendering\r\n\r\n    for (let base_x = 0; base_x < this.size.x; base_x += col_size) {\r\n      const ray_diff_angle =\r\n        (((base_x - this.size.x / 2) * game.view_angle) / this.size.x) *\r\n        degreToRadian;\r\n      const ray_angle = game.player.angle + ray_diff_angle; // get the angle of the actual ray\r\n      const nextWall = map.getNextPoint(player_pos, ray_angle); // calculate where the ray goes\r\n\r\n      const t = textures.get(nextWall.from === \"VERTICAL\" ? \"wall\" : \"wall_2\")!;\r\n      const tile_size = t.columns.length;\r\n      const dist = nextWall.distance * tile_size * Math.cos(ray_diff_angle); // diff_angle to fix fish eye effect\r\n\r\n      const lineHeight =\r\n        nextWall.distance === Infinity\r\n          ? 0\r\n          : Math.floor((tile_size * this.size.y) / dist);\r\n      const tile_y_step = 1 / tile_size;\r\n      const tile_y_offset = 0;\r\n\r\n      const base_y = Math.floor(this.size.y / 2 - lineHeight / 2); // centering the line\r\n\r\n      // draw walls\r\n      const colIndex = Math.floor(nextWall.wallCol * t.columns.length);\r\n      const col = t.columns[colIndex] as Pixel[];\r\n      let tile_y = tile_y_offset * tile_y_step;\r\n      const line_ratio = Math.min(lineHeight, this.size.y) / this.size.y;\r\n      for (\r\n        let y = 0;\r\n        y < tile_size && base_y + (y * lineHeight) / tile_size < this.size.y;\r\n        y++\r\n      ) {\r\n        const p: Pixel = col[Math.floor(tile_y * tile_size)];\r\n        const color_ratio = -255 * this.shadow_ratio * (1 - line_ratio);\r\n        this.setColor(\r\n          (p.r + color_ratio) / 255,\r\n          (p.g + color_ratio) / 255,\r\n          (p.b + color_ratio) / 255\r\n        );\r\n        const y1 = base_y + (y * lineHeight) / tile_size;\r\n        const dy = lineHeight / tile_size + 1;\r\n        // for(let x = base_x; x < base_x + col_size; x++){\r\n        // \tthis.drawHorizontalLine(x, y1, y1+dy);\r\n        // }\r\n        this.drawRectangle(base_x, y1, col_size, dy);\r\n        tile_y += tile_y_step;\r\n      }\r\n\r\n      //draw floor and ceiling\r\n      let color = floor_texture.columns[0][0];\r\n      let last_draw_y = base_y + lineHeight - 1;\r\n\r\n      const raFix = Math.cos(ray_diff_angle);\r\n\r\n      for (let y = last_draw_y; y <= this.size.y; y++) {\r\n        const dy = y / this.size.y - 0.5;\r\n        const floor_dist = 1 / (dy * 2);\r\n\r\n        let tx = player_pos.x + (floor_dist * Math.cos(ray_angle)) / raFix;\r\n        let ty = player_pos.y + (floor_dist * Math.sin(ray_angle)) / raFix;\r\n        tx = Math.floor(tx * floor_tile_size);\r\n        ty = Math.floor(ty * floor_tile_size);\r\n\r\n        const nColor =\r\n          floor_texture.columns[tx & (floor_tile_size - 1)][\r\n            ty & (floor_tile_size - 1)\r\n          ];\r\n        if (nColor !== color || y === this.size.y) {\r\n          this.setColor(color.r / 255, color.g / 255, color.b / 255);\r\n          color = nColor;\r\n          // for (let x = base_x; x < base_x + col_size; x++) {\r\n          // \tthis.drawHorizontalLine(x, this.size.y - last_draw_y, this.size.y - y);\r\n          // \tthis.drawHorizontalLine(x, last_draw_y, y);\r\n          // }\r\n          this.drawRectangle(base_x, last_draw_y, col_size, y - last_draw_y);\r\n          this.drawRectangle(\r\n            base_x,\r\n            this.size.y - last_draw_y,\r\n            col_size,\r\n            this.size.y - y - last_draw_y\r\n          );\r\n          last_draw_y = y;\r\n        }\r\n      }\r\n    }\r\n    this.finishDrawing();\r\n  }\r\n\r\n  /**\r\n   * Calcule et affiche le nombre de FPS à l'écran\r\n   * @param dt le dernier délai entre deux affichage\r\n   */\r\n  drawFps(dt: number) {\r\n    tick_sum -= tick_list[tick_index];\r\n    tick_sum += dt;\r\n    tick_list[tick_index] = dt;\r\n    tick_index = ++tick_index % SAMPLE_SIZE;\r\n\r\n    const fps = SAMPLE_SIZE / tick_sum;\r\n    this.context2D.clearRect(0, 0, this.size.x, this.size.y);\r\n    this.context2D.fillText(fps.toFixed(2), this.size.x - 40, 15);\r\n  }\r\n}\r\n","\r\nimport {defineComponent, PropType} from \"vue\";\r\nimport {Game} from \"@/Engine/Game\";\r\nimport {CanvasRaycast} from \"@/Rendering/CanvasRaycast\";\r\n\r\nexport default defineComponent({\r\n  name: 'Play',\r\n  props: {\r\n    game: {\r\n      type: Object as PropType<Game>,\r\n      required: true\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log('mounted');\r\n    const renderer = new CanvasRaycast(window.innerWidth*.8, window.innerHeight*.8);\r\n    this.game.loop([renderer]);\r\n  },\r\n  unmounted() {\r\n    this.game.stop();\r\n  }\r\n})\r\n","import { render } from \"./Play.vue?vue&type=template&id=742fe292&ts=true\"\nimport script from \"./Play.vue?vue&type=script&lang=ts\"\nexport * from \"./Play.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\projets_persos\\\\maze-squared\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["module","exports","ArrayBuffer","DataView","NAME","Constructor","Prototype","NATIVE_ARRAY_BUFFER","DESCRIPTORS","global","isCallable","isObject","hasOwn","classof","tryToString","createNonEnumerableProperty","defineBuiltIn","defineProperty","isPrototypeOf","getPrototypeOf","setPrototypeOf","wellKnownSymbol","uid","InternalStateModule","enforceInternalState","enforce","getInternalState","get","Int8Array","Int8ArrayPrototype","prototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","ObjectPrototype","Object","TypeError","TO_STRING_TAG","TYPED_ARRAY_TAG","TYPED_ARRAY_CONSTRUCTOR","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","isView","it","klass","getTypedArrayConstructor","proto","state","isTypedArray","aTypedArray","aTypedArrayConstructor","C","exportTypedArrayMethod","KEY","property","forced","options","ARRAY","TypedArrayConstructor","error","error2","exportTypedArrayStaticMethod","Function","this","undefined","bind","IndexedObject","toObject","lengthOfArrayLike","createMethod","TYPE","IS_FIND_LAST_INDEX","$this","callbackfn","that","value","result","O","self","boundFunction","index","findLast","findLastIndex","fails","F","constructor","uncurryThis","aCallable","NATIVE_BIND","fn","apply","arguments","sharedKey","CORRECT_PROTOTYPE_GETTER","IE_PROTO","$Object","object","ArrayBufferViewCore","toIntegerOrInfinity","len","relativeIndex","k","$findLastIndex","predicate","length","$findLast","_hoisted_1","id","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","CanvasWebGL","Canvas","size","super","r","g","b","gl","canvas","getContext","setupWebGl","reset","vertexShaderSource","fragmentShaderSource","vShader","createShader","VERTEX_SHADER","Error","shaderSource","compileShader","fShader","FRAGMENT_SHADER","program","createProgram","shaderProgram","attachShader","linkProgram","useProgram","deviceToNormalised","point","horizontal","width","height","setColor","red","green","blue","color","drawHorizontalLine","x","y1","y2","lines_vertex","push","drawRectangle","y","xLeft","xRight","yUp","yDown","triangle_vertex","clearColor","finishDrawing","finishLines","finishRect","verticesAndColors","vbo","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","FSIZE","BYTES_PER_ELEMENT","a_Position","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","a_Color","drawArrays","LINES","TRIANGLES","SAMPLE_SIZE","tick_index","tick_sum","tick_list","Array","fill","CanvasRaycast","context2D","createCanvas","resizeCanvasHtml","font","fillStyle","drawContext","game","dt","drawFps","floor_texture","textures","floor_tile_size","columns","map","player_pos","player","pos","col_size","base_x","ray_diff_angle","view_angle","degreToRadian","ray_angle","angle","nextWall","getNextPoint","t","from","tile_size","dist","distance","Math","cos","lineHeight","Infinity","floor","tile_y_step","tile_y_offset","base_y","colIndex","wallCol","col","tile_y","line_ratio","min","p","color_ratio","shadow_ratio","dy","last_draw_y","raFix","floor_dist","tx","ty","sin","nColor","fps","clearRect","fillText","toFixed","defineComponent","name","props","type","required","mounted","console","log","renderer","window","innerWidth","innerHeight","loop","unmounted","stop","__exports__"],"sourceRoot":""}